---
title: 0327 第一次内网穿透
date: '2025/3/27 18:55:44'
categories:
  - - Diary
    - '2025'
  - '2025'
abbrlink: daf32a7
---

起因是想要配置一个远程方案让我可以使用平板操纵笔记本，用来写代码之类的，毕竟是 S10 Ultra 嘛~

对于局域网内的的 Android 控制电脑（用于推Virtual Novel 甚至看电影都不错），Moonlight + Sunshine基地版（支持副屏）是非常不错的选择，颜色漂亮，帧率，操纵延时，都很好，分辨率也支持原生。

对于公网（远程操纵呢），之前尝试过 UU远程，其实还算不错，但是不支持自定义分辨率以及 鼠标移动太难绷了。

所幸就尝试一下内网穿透吧，最开始的计划呢，是通过FRP(frps + frpc)，或者 SSH Tunnel进行内网穿透，但是后来和朋友合租了一个服务器（带宽大很多）于是决定使用 Headscale (Tailscale)。

> 服务器购买的是北京 1c0.5g, 220一年

感谢[文档](https://headscale.net/stable/)以及 GPT，吾辈大概搞懂了是一个什么东西，不得不说，这个设计确实是非常漂亮的，将大家的设备放到一个虚拟局域网里面。

> 这篇[Blog](https://mritd.com/2022/10/19/use-headscale-to-build-a-p2p-network)也写得很好

吾辈的设备算是正常配置好了内网穿透，虽然因为 Tailscale 和 Clash 会在 没有root的设备上冲突，不过人类大概不会同时操控电脑还需要 用 Clash  

但是再之后，就遇到了大麻烦。和群友们聊天从而听说 RDP (Windows Remote Desktop Protocol), 挺好用的，适合编程作业，于是决定试一试

但是不幸的是RDP 不支持 Android 输入拦截，别说快捷键支持了，连调用win的输入法打字都做不到，只能用平板的输入法（开了 Scancode Keyboard），哪怕英文输入，也有很高的延时，但是鼠标确实舒服，并且会自动禁用动画效果之类的，总体流畅度挺好。

还有一个极其严重的问题就是 RDP 远程操控，本机的用户就会退出登录，也就是说，一个用户只能在一处同时登录，这还是比较麻烦的，尤其是配置环节，分辨率适配虽然方便，但是win内容放大的话会影响到物理屏幕的配置QWQ

试了很多客户端，从 RD Client 到 aFreeRDP，似乎都不提供这个功能，于是决定还是去配置 Moonlight。

MoonLight 的话，遇到的问题是链接不稳定，有一段时间不知道是否是校园网的问题，我一直无法和 主机进行连接，直到分辨率降到了 360P，然后就是虚拟副屏无法启用（这个问题经过研究是忘了在win设置里面将屏幕显示设置为拓展）

但是在经过一些我也不着调在干嘛的折腾后，能够以 原生分辨率 + 30帧 + 15MBPS 的参数运行了，感动

但是朋友那边又出了点问题，他的设备老是连不上网络，决定换一种新的内网穿透方案

嗯，中途又听说了 rustdesk https://rustdesk.com/ ，方案，回头看看吧